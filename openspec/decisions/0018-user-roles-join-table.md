# 0018：用户角色采用关联表（user_roles）

## 状态

已决定

## 背景

MVP 需要最小 RBAC 能力（`USER` / `ADMIN`），用于：

- 便于演示 admin 放行（跨用户查看/检索等）
- 后续演进到更细粒度权限模型时，避免在单列数组上做复杂迁移

在 PostgreSQL 上，`roles text[]` 虽实现简单，但当需要：

- 为角色增加元数据/审计字段
- 引入权限集合、角色继承、租户维度

会更早遇到结构演进压力。

## 决策

- 用户角色采用关联表：`user_roles(user_id, role)`。
- `user_roles` 以 `(user_id, role)` 作为主键或唯一约束，避免重复角色写入。

## 约束与约定

- `role` 为字符串枚举，MVP 仅使用：`USER`、`ADMIN`。
- 权限判断以“用户是否拥有某角色”作为最小实现，避免引入复杂 RBAC 管理后台。

